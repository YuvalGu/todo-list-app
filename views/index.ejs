<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Home Page</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://use.fontawesome.com/releases/v5.15.4/css/all.css"
    />
  </head>
  <body style="background-color: #eee">
    <section class="vh-50" style="background-color: #eee">
      <div class="container py-5 h-50">
        <div class="row d-flex justify-content-center align-items-center h-50">
          <div class="col-md-12 col-xl-10">
            <div class="card">
              <div class="card-header p-3">
                <h5 class="mb-0"><i class="fas fa-tasks me-2"></i>Todo List</h5>
              </div>
              <div
                class="card-body"
                data-mdb-perfect-scrollbar="true"
                style="position: relative; height: 70%; overflow-y: auto"
              >
                <% if(data.length) { %>
                <table class="table mb-0">
                  <thead>
                    <tr>
                      <th scope="col">Team Member</th>
                      <th scope="col">Task</th>
                      <th scope="col">Priority</th>
                      <th scope="col">Actions</th>
                    </tr>
                  </thead>
                  <tbody>
                    <% for(var i = 0; i < data.length; i++) { %>
                    <tr class="fw-normal">
                      <th>
                        <i class="fas fa-user"></i>
                        <span class="ms-2"><%= data[i].team_member%></span>
                      </th>
                      <td class="align-middle">
                        <span><%= data[i].title%></span>
                      </td>
                      <td class="align-middle">
                        <h6 class="mb-0">
                          <% switch (data[i].priority) { case 'High' : %>
                          <span class="badge bg-danger">High priority</span>
                          <% break; case 'Middle' : %>
                          <span class="badge bg-warning">Middle priority</span>
                          <% break; case 'Low' : %>
                          <span class="badge bg-success">Low priority</span>
                          <% break; }%>
                        </h6>
                      </td>
                      <td class="align-middle">
                        <a
                          href="../done/<%=data[i].id%>"
                          data-mdb-toggle="tooltip"
                          title="Done"
                          ><i class="fas fa-check text-success me-3"></i
                        ></a>
                        <a
                          href="../edit/<%=data[i].id%>"
                          data-mdb-toggle="tooltip"
                          title="Edit"
                        >
                          <i class="fas fa-pencil-alt text-warning me-3"></i
                        ></a>
                        <a
                          href="../delete/<%=data[i].id%>"
                          onclick="return alert('Are You sure?')"
                          data-mdb-toggle="tooltip"
                          title="Remove"
                        >
                          <i class="fas fa-trash-alt text-danger me-3"></i
                        ></a>
                      </td>
                    </tr>
                    <% } %>
                  </tbody>
                </table>
                <% } else { %>
                <!-- if result is empty -->
                <p class="text-center">No tasks found!</p>
                <% } %>
              </div>
              <div class="card-footer text-end p-3">
                <a href="/add"
                  ><button class="btn btn-primary">Add Task</button></a
                >
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
    <% if(finished_data.length) { %>
    <section class="vh-50" style="background-color: #eee">
      <div class="container py-5 h-50">
        <div class="row d-flex justify-content-center align-items-center h-50">
          <div class="col-md-12 col-xl-10">
            <div class="card">
              <div class="card-header p-3">
                <h5 class="mb-0">
                  <i class="fas fa-check me-2"></i>Finished Tasks
                </h5>
              </div>
              <div
                class="card-body"
                data-mdb-perfect-scrollbar="true"
                style="position: relative; height: 30%; overflow-y: auto"
              >
                <table class="table mb-0">
                  <thead>
                    <tr>
                      <th scope="col">Team Member</th>
                      <th scope="col">Task</th>
                      <th scope="col">Priority</th>
                      <th scope="col">Actions</th>
                    </tr>
                  </thead>
                  <tbody>
                    <% for(var i = 0; i < finished_data.length; i++) { %>
                    <tr class="fw-normal">
                      <th>
                        <i class="fas fa-user"></i>
                        <span class="ms-2"
                          ><%= finished_data[i].team_member%></span
                        >
                      </th>
                      <td class="align-middle">
                        <span><%= finished_data[i].title%></span>
                      </td>
                      <td class="align-middle">
                        <h6 class="mb-0">
                          <% switch (finished_data[i].priority) { case 'High' :
                          %>
                          <span class="badge bg-danger">High priority</span>
                          <% break; case 'Middle' : %>
                          <span class="badge bg-warning">Middle priority</span>
                          <% break; case 'Low' : %>
                          <span class="badge bg-success">Low priority</span>
                          <% break; }%>
                        </h6>
                      </td>
                      <td class="align-middle">
                        <a
                          href="../redo/<%=finished_data[i].id%>"
                          data-mdb-toggle="tooltip"
                          title="Redo"
                          ><i class="fas fa-recycle text-success me-3"></i
                        ></a>
                        <a
                          href="../delete/<%=finished_data[i].id%>"
                          onclick="return alert('Are You sure?')"
                          data-mdb-toggle="tooltip"
                          title="Remove"
                        >
                          <i class="fas fa-trash-alt text-danger me-3"></i
                        ></a>
                      </td>
                    </tr>
                    <% } %>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
    <% } %>
  </body>
</html>
